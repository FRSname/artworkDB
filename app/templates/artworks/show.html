{% extends "base.html" %}
{% block content %}
<article>
  <h1>{{ a.title }}</h1>
  <div style="margin:8px 0; display:flex; gap:8px; flex-wrap:wrap">
    <a class="btn" href="/artworks/{{ a.artwork_id }}/edit">Edit</a>
    <a class="btn" href="/artworks/{{ a.artwork_id }}/onepager.pdf" target="_blank">One-pager (PDF)</a>
  </div>
  <div class="muted">{{ a.artist_name }} · {{ a.year }}</div>
  {% if a.primary_image %}
    <img style="max-width:100%;height:auto;margin:16px 0" src="{{ a.primary_image }}" alt="{{ a.title }}">
  {% endif %}
  <dl style="display:grid;grid-template-columns:160px 1fr;gap:6px 12px">
    <dt>Artwork ID</dt><dd>{{ a.artwork_id }}</dd>
    <dt>Inventory</dt><dd>{{ a.inventory_code }}</dd>
    <dt>Medium</dt><dd>{{ a.medium }}</dd>
    <dt>Surface</dt><dd>{{ a.surface }}</dd>
    <dt>Size (mm)</dt><dd>{{ a.width_mm }} × {{ a.height_mm }} × {{ a.depth_mm }}</dd>
    <dt>Framed (mm)</dt><dd>{{ a.framed_width_mm }} × {{ a.framed_height_mm }} × {{ a.framed_depth_mm }}</dd>
    <dt>Edition</dt><dd>{{ a.edition }}</dd>
    <dt>Series</dt><dd>{{ a.series }}</dd>
    <dt>Style</dt><dd>{{ a.style }}</dd>
    <dt>Keywords</dt><dd>{{ a.subject_keywords }}</dd>
    <dt>Provenance</dt><dd>{{ a.provenance }}</dd>
    <dt>Location</dt><dd>{{ a.location }}</dd>
    <dt>Slug</dt><dd>{{ a.web_slug }}</dd>
    <dt>Created</dt><dd>{{ a.created_at }}</dd>
  </dl>

  <h2>Gallery</h2>
  {% if images %}
  <div class="grid">
    {% for img in images %}
    <div class="card">
      <img class="thumb" src="{{ img.thumb or img.path }}" alt="{{ a.title }} detail">
      <div style="padding:12px;display:flex;gap:8px;align-items:center;flex-wrap:wrap">
        <form action="/artworks/{{ a.artwork_id }}/images/{{ img.id }}/make-primary" method="post">
          <button class="btn" type="submit">Make primary</button>
        </form>
        <a class="btn" href="{{ img.path }}" target="_blank">Open</a>
        <form action="/artworks/{{ a.artwork_id }}/images/{{ img.id }}/delete" method="post" onsubmit="return confirm('Delete this image?')">
          <button class="btn" type="submit">Delete</button>
        </form>
      </div>
    </div>
    {% endfor %}
  </div>
  {% else %}
    <p class="muted">No additional images yet.</p>
  {% endif %}

  <h3 style="margin-top:20px">Add more images</h3>
  <form action="/artworks/{{ a.artwork_id }}/images" method="post" enctype="multipart/form-data">
    <input type="hidden" name="view" value="detail">
    <input type="file" name="files" accept="image/*" multiple>
    <div style="margin-top:8px"><button class="btn" type="submit">Upload</button></div>
  </form>
</article>
{% endblock %}
